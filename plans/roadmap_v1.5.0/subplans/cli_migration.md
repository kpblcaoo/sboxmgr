# Subplan: CLI_Migration (Typer transition)

## ÐžÑÐ½Ð¾Ð²Ð½Ñ‹Ðµ Ð·Ð°Ð´Ð°Ñ‡Ð¸

| ID    | Ð¡Ñ‚Ð°Ñ‚ÑƒÑ | Ð”ÐµÐ¹ÑÑ‚Ð²Ð¸Ðµ                                                        | ÐžÐ±ÑÐ·Ð°Ñ‚ÐµÐ»ÑŒÐ½Ð¾ÑÑ‚ÑŒ |
|-------|--------|-----------------------------------------------------------------|----------------|
| CM-01 | âœ…     | Ð£Ð´Ð°Ð»Ð¸Ñ‚ÑŒ `src/main.py`                                           | âœ…             |
| CM-02 | âœ     | ÐŸÐµÑ€ÐµÐ¿Ð¸ÑÐ°Ñ‚ÑŒ `install/wizard.py` Ð½Ð° Typer (Ð¸Ð»Ð¸ `sboxctl install`) | ðŸŸ¡             |
| CM-03 | âœ…     | ÐŸÑ€Ð¾Ð²ÐµÑ€Ð¸Ñ‚ÑŒ entry-point Ð² `pyproject.toml` (sboxctl â†’ Typer)       | âœ…             |
| CM-04 | âœ     | ÐžÐ±Ð½Ð¾Ð²Ð¸Ñ‚ÑŒ README / onboarding: ÑƒÐ±Ñ€Ð°Ñ‚ÑŒ `python main.py`            | ðŸŸ¡             |
| CM-05 | âœ     | e2e-Ñ‚ÐµÑÑ‚ `sboxctl --help`                                       | ðŸŸ¡             |
| CM-06 | âœ…     | Ð£Ð´Ð°Ð»Ð¸Ñ‚ÑŒ Ð²ÑÐµ `argparse`-Ð¸Ð¼Ð¿Ð¾Ñ€Ñ‚Ñ‹ Ð¸Ð· ÐºÐ¾Ð´Ð°                          | âœ…             |
| CM-07 | âœ     | Ð¤Ð¸Ð½Ð°Ð»ÑŒÐ½Ñ‹Ð¹ Ð°ÑƒÐ´Ð¸Ñ‚ CLI Ð¸ Ñ‚ÐµÑÑ‚Ð¾Ð², Ñ€ÐµÐ²ÑŒÑŽ ÑÑ‚Ñ€ÑƒÐºÑ‚ÑƒÑ€Ñ‹                   | ðŸŸ¢             |

> **Ð’ÐµÑ‚ÐºÐ° `refactor/cli-manager` Ð·Ð°Ð²ÐµÑ€ÑˆÐµÐ½Ð° Ð¿Ð¾ Ð¾ÑÐ½Ð¾Ð²Ð½Ð¾Ð¹ Ð·Ð°Ð´Ð°Ñ‡Ðµ: Ð°Ñ€Ñ…Ð¸Ñ‚ÐµÐºÑ‚ÑƒÑ€Ð½Ñ‹Ð¹ Ñ€ÐµÑ„Ð°ÐºÑ‚Ð¾Ñ€Ð¸Ð½Ð³ CLI, Ð¿ÐµÑ€ÐµÑ…Ð¾Ð´ Ð½Ð° Typer, ÑƒÐ´Ð°Ð»ÐµÐ½Ð¸Ðµ argparse, Ñ‡Ð¸ÑÑ‚ÐºÐ° ÑÑ‚Ñ€ÑƒÐºÑ‚ÑƒÑ€Ñ‹, Ð¿Ð¾Ð»Ð½Ð¾Ðµ Ð¿Ð¾ÐºÑ€Ñ‹Ñ‚Ð¸Ðµ Ñ‚ÐµÑÑ‚Ð°Ð¼Ð¸.**
> 
> **Ð”Ð°Ð»ÑŒÐ½ÐµÐ¹ÑˆÐ¸Ðµ Ñ€Ð°Ð±Ð¾Ñ‚Ñ‹ Ð±ÑƒÐ´ÑƒÑ‚ Ð²ÐµÑÑ‚Ð¸ÑÑŒ Ð² Ð¾Ñ‚Ð´ÐµÐ»ÑŒÐ½Ñ‹Ñ… Ð²ÐµÑ‚ÐºÐ°Ñ… (ÑÐ¼. Ð½Ð¸Ð¶Ðµ).**

## Security-Ð¿Ð¾Ð´Ð·Ð°Ð´Ð°Ñ‡Ð¸

| ID     | Ð¡Ñ‚Ð°Ñ‚ÑƒÑ | Ð—Ð°Ð´Ð°Ñ‡Ð°                                                        | Ð’Ð°Ð¶Ð½Ð¾ÑÑ‚ÑŒ |
|--------|--------|---------------------------------------------------------------|----------|
| SEC-01 | âŒ     | ÐŸÑ€Ð¾Ð²ÐµÑ€ÐºÐ° URL Ð² CLI Ð¸ wizard (Ð²Ð°Ð»Ð¸Ð´Ð½Ð¾ÑÑ‚ÑŒ, https, Ð½ÐµÑ‚ file://)  | ðŸ”¥       |
| SEC-02 | âŒ     | ÐŸÑ€Ð¾Ð²ÐµÑ€ÐºÐ° root-Ð´Ð¾ÑÑ‚ÑƒÐ¿Ð° Ð² wizard (ÐµÑÐ»Ð¸ Ð½ÑƒÐ¶ÐµÐ½ systemctl)         | ðŸ”¥       |
| SEC-03 | âŒ     | Ð¤ÑƒÐ½ÐºÑ†Ð¸Ñ `safe_path()` Ð¸ Ð¿Ñ€Ð¸Ð¼ÐµÐ½ÐµÐ½Ð¸Ðµ ÐºÐ¾ Ð²ÑÐµÐ¼ Ð¿ÑƒÑ‚ÑÐ¼              | ðŸŸ¡       |
| SEC-04 | âŒ     | `--dry-run` Ð¿Ð¾ ÑƒÐ¼Ð¾Ð»Ñ‡Ð°Ð½Ð¸ÑŽ Ð¿Ñ€Ð¸ ÑƒÑÑ‚Ð°Ð½Ð¾Ð²ÐºÐµ/Ð·Ð°Ð¼ÐµÐ½Ðµ Ñ„Ð°Ð¹Ð»Ð¾Ð²          | ðŸŸ¡       |
| SEC-05 | âŒ     | Ð—Ð°Ñ‰Ð¸Ñ‚Ð° Ð¾Ñ‚ Ð¿ÐµÑ€ÐµÐ·Ð°Ð¿Ð¸ÑÐ¸ ÐºÐ¾Ð½Ñ„Ð¸Ð³Ð¾Ð² Ð±ÐµÐ· Ñ€ÐµÐ·ÐµÑ€Ð²Ð½Ð¾Ð¹ ÐºÐ¾Ð¿Ð¸Ð¸             | ðŸŸ¢       |
| SEC-06 | âŒ     | Ð¤Ð¸Ð»ÑŒÑ‚Ñ€Ð°Ñ†Ð¸Ñ Ñ‡ÑƒÐ²ÑÑ‚Ð²Ð¸Ñ‚ÐµÐ»ÑŒÐ½Ñ‹Ñ… Ð´Ð°Ð½Ð½Ñ‹Ñ… Ð¸Ð· Ð»Ð¾Ð³Ð¾Ð²                     | ðŸŸ¢       |

## Ð”Ð°Ð»ÑŒÐ½ÐµÐ¹ÑˆÐ¸Ðµ Ñ€Ð°Ð±Ð¾Ñ‚Ñ‹ â€” Ð¾Ñ‚Ð´ÐµÐ»ÑŒÐ½Ñ‹Ðµ Ð²ÐµÑ‚ÐºÐ¸

- **feat/cli-security** â€” Ð²ÑÐµ security-hardening Ð·Ð°Ð´Ð°Ñ‡Ð¸ (SEC-01 ... SEC-06)
- **docs/cli-update** â€” Ñ„Ð¸Ð½Ð°Ð»ÑŒÐ½Ð¾Ðµ Ð¾Ð±Ð½Ð¾Ð²Ð»ÐµÐ½Ð¸Ðµ Ð´Ð¾ÐºÑƒÐ¼ÐµÐ½Ñ‚Ð°Ñ†Ð¸Ð¸, showcase, onboarding
- **feat/cli-wizard-typer** â€” Ð¿ÐµÑ€ÐµÐ¿Ð¸ÑÐºÐ° install/wizard.py Ð½Ð° Typer/Ð¿Ð¾Ð´ÐºÐ¾Ð¼Ð°Ð½Ð´Ñƒ
- **test/cli-e2e** â€” e2e-Ñ‚ÐµÑÑ‚Ñ‹ CLI (`sboxctl --help`, ÑÑ†ÐµÐ½Ð°Ñ€Ð¸Ð¸ Ð·Ð°Ð¿ÑƒÑÐºÐ°)

- [ ] ÐŸÑ€Ð¾Ð²ÐµÑÑ‚Ð¸ Ñ„Ð¸Ð½Ð°Ð»ÑŒÐ½Ñ‹Ð¹ Ð°ÑƒÐ´Ð¸Ñ‚ CLI, Ñ‚ÐµÑÑ‚Ð¾Ð² Ð¸ ÑÑ‚Ñ€ÑƒÐºÑ‚ÑƒÑ€Ñ‹ (CM-07)
- [ ] ÐžÐ±Ð½Ð¾Ð²Ð¸Ñ‚ÑŒ README, onboarding, usage-Ð¿Ñ€Ð¸Ð¼ÐµÑ€Ñ‹, ÑƒÐ±Ñ€Ð°Ñ‚ÑŒ Ð²ÑÐµ ÑƒÐ¿Ð¾Ð¼Ð¸Ð½Ð°Ð½Ð¸Ñ ÑÑ‚Ð°Ñ€Ð¾Ð³Ð¾ main.py (CM-04)
- [ ] Ð”Ð¾Ð±Ð°Ð²Ð¸Ñ‚ÑŒ/Ð¾Ð±Ð½Ð¾Ð²Ð¸Ñ‚ÑŒ e2e-Ñ‚ÐµÑÑ‚Ñ‹ CLI (`sboxctl --help`, ÑÑ†ÐµÐ½Ð°Ñ€Ð¸Ð¸ Ð·Ð°Ð¿ÑƒÑÐºÐ°) (CM-05)
- [ ] Ð ÐµÐ°Ð»Ð¸Ð·Ð¾Ð²Ð°Ñ‚ÑŒ Ð²ÑÐµ security-Ð¿Ð¾Ð´Ð·Ð°Ð´Ð°Ñ‡Ð¸ (SEC-01 ... SEC-06)
- [ ] ÐŸÑ€Ð¾Ð²ÐµÑÑ‚Ð¸ Ñ€ÐµÐ²ÑŒÑŽ Ð¸ Ð´Ð¾Ñ€Ð°Ð±Ð¾Ñ‚ÐºÑƒ showcase/Ð´Ð¾ÐºÑƒÐ¼ÐµÐ½Ñ‚Ð°Ñ†Ð¸Ð¸ Ð¿Ð¾ Ð½Ð¾Ð²Ð¾Ð¹ Ð°Ñ€Ñ…Ð¸Ñ‚ÐµÐºÑ‚ÑƒÑ€Ðµ CLI
- [ ] Ð—Ð°Ñ„Ð¸ÐºÑÐ¸Ñ€Ð¾Ð²Ð°Ñ‚ÑŒ lessons learned Ð¸ Ð¾Ð±Ð½Ð¾Ð²Ð¸Ñ‚ÑŒ changelog

> Ð¡Ñ‚Ð°Ñ‚ÑƒÑ
> * âŒ â€” Ð½Ðµ Ð½Ð°Ñ‡Ð°Ñ‚Ð¾
> * âœ â€” Ð² Ñ€Ð°Ð±Ð¾Ñ‚Ðµ
> * âœ… â€” Ð²Ñ‹Ð¿Ð¾Ð»Ð½ÐµÐ½Ð¾ 