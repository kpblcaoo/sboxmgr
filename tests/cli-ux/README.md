# CLI UX Tests

**–¶–µ–ª—å:** –ö–æ–Ω—Ç—Ä–æ–ª—å UX –ø—Ä–∏ —Ä–µ—Ñ–∞–∫—Ç–æ—Ä–∏–Ω–≥–µ CLI –∏ –æ–±–µ—Å–ø–µ—á–µ–Ω–∏–µ –∫–∞—á–µ—Å—Ç–≤–∞ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—å—Å–∫–æ–≥–æ –æ–ø—ã—Ç–∞.

## –°—Ç—Ä—É–∫—Ç—É—Ä–∞ —Ç–µ—Å—Ç–æ–≤

### üìã E2E Scenarios
- **Gherkin —Å—Ü–µ–Ω–∞—Ä–∏–∏** - –ø–æ–≤–µ–¥–µ–Ω—á–µ—Å–∫–∏–µ —Ç–µ—Å—Ç—ã (–ø–ª–∞–Ω–∏—Ä–æ–≤–∞–Ω–∏–µ)
- **Expected UX flows** - –æ–∂–∏–¥–∞–µ–º—ã–µ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—å—Å–∫–∏–µ —Å—Ü–µ–Ω–∞—Ä–∏–∏
- **Integration tests** - –∏–Ω—Ç–µ–≥—Ä–∞—Ü–∏–æ–Ω–Ω—ã–µ —Ç–µ—Å—Ç—ã (–±—É–¥—É—â–∏–µ)

### üß™ Test Categories (–ø–ª–∞–Ω–∏—Ä–æ–≤–∞–Ω–∏–µ)
- **Migration tests** - —Ç–µ—Å—Ç—ã –º–∏–≥—Ä–∞—Ü–∏–∏ —Å–æ —Å—Ç–∞—Ä–æ–π —Å—Ç—Ä—É–∫—Ç—É—Ä—ã
- **Interactive tests** - —Ç–µ—Å—Ç—ã –∏–Ω—Ç–µ—Ä–∞–∫—Ç–∏–≤–Ω—ã—Ö prompts
- **JSON output tests** - —Ç–µ—Å—Ç—ã JSON-–≤—ã–≤–æ–¥–∞
- **Global flags tests** - —Ç–µ—Å—Ç—ã –≥–ª–æ–±–∞–ª—å–Ω—ã—Ö —Ñ–ª–∞–≥–æ–≤
- **Wizard tests** - —Ç–µ—Å—Ç—ã –∏–Ω—Ç–µ—Ä–∞–∫—Ç–∏–≤–Ω–æ–≥–æ wizard

## –¢–µ–∫—É—â–∏–π —Å—Ç–∞—Ç—É—Å

**–ü—Ä–∏–º–µ—á–∞–Ω–∏–µ:** –ù–∞ –¥–∞–Ω–Ω—ã–π –º–æ–º–µ–Ω—Ç —Å–æ–∑–¥–∞–Ω—ã —Ç–æ–ª—å–∫–æ Gherkin —Å—Ü–µ–Ω–∞—Ä–∏–∏ –∏ –æ–ø–∏—Å–∞–Ω–∏—è UX-—Ñ–ª–æ—É. –ü–æ–ª–Ω–æ—Ü–µ–Ω–Ω—ã–µ —Ç–µ—Å—Ç—ã –±—É–¥—É—Ç —Å–æ–∑–¥–∞–Ω—ã –ø–æ—Å–ª–µ —Ä–µ–∞–ª–∏–∑–∞—Ü–∏–∏ —Ñ—É–Ω–∫—Ü–∏–æ–Ω–∞–ª—å–Ω–æ—Å—Ç–∏.

### –ß—Ç–æ –≥–æ—Ç–æ–≤–æ:
- ‚úÖ Gherkin —Å—Ü–µ–Ω–∞—Ä–∏–∏ –¥–ª—è –º–∏–≥—Ä–∞—Ü–∏–∏
- ‚úÖ Gherkin —Å—Ü–µ–Ω–∞—Ä–∏–∏ –¥–ª—è wizard
- ‚úÖ Gherkin —Å—Ü–µ–Ω–∞—Ä–∏–∏ –¥–ª—è power user
- ‚úÖ –û–ø–∏—Å–∞–Ω–∏—è –æ–∂–∏–¥–∞–µ–º—ã—Ö UX-—Ñ–ª–æ—É
- ‚úÖ –°—Ç—Ä—É–∫—Ç—É—Ä–∞ –¥–ª—è –±—É–¥—É—â–∏—Ö —Ç–µ—Å—Ç–æ–≤

### –ß—Ç–æ –ø–ª–∞–Ω–∏—Ä—É–µ—Ç—Å—è:
- üîÑ E2E —Ç–µ—Å—Ç—ã (–ø–æ—Å–ª–µ —Ä–µ–∞–ª–∏–∑–∞—Ü–∏–∏ CLI)
- üîÑ Integration —Ç–µ—Å—Ç—ã (–ø–æ—Å–ª–µ —Ä–µ–∞–ª–∏–∑–∞—Ü–∏–∏ —Å–µ—Ä–≤–∏—Å–æ–≤)
- üîÑ Unit —Ç–µ—Å—Ç—ã (–ø–æ—Å–ª–µ —Ä–µ—Ñ–∞–∫—Ç–æ—Ä–∏–Ω–≥–∞)
- üîÑ CI/CD –∏–Ω—Ç–µ–≥—Ä–∞—Ü–∏—è

## –ó–∞–ø—É—Å–∫ —Ç–µ—Å—Ç–æ–≤ (–±—É–¥—É—â–µ–µ)

```bash
# –ó–∞–ø—É—Å–∫ –≤—Å–µ—Ö UX —Ç–µ—Å—Ç–æ–≤
pytest tests/cli-ux/

# –ó–∞–ø—É—Å–∫ –∫–æ–Ω–∫—Ä–µ—Ç–Ω–æ–π –∫–∞—Ç–µ–≥–æ—Ä–∏–∏
pytest tests/cli-ux/e2e/
pytest tests/cli-ux/integration/

# –ó–∞–ø—É—Å–∫ —Å –ø–æ–¥—Ä–æ–±–Ω—ã–º –≤—ã–≤–æ–¥–æ–º
pytest tests/cli-ux/ -v -s

# –ó–∞–ø—É—Å–∫ —Å coverage
pytest tests/cli-ux/ --cov=src/sboxmgr/cli
```

## –°—Ç—Ä—É–∫—Ç—É—Ä–∞ —Ñ–∞–π–ª–æ–≤

```
tests/cli-ux/
‚îú‚îÄ‚îÄ README.md                 # –≠—Ç–æ—Ç —Ñ–∞–π–ª
‚îú‚îÄ‚îÄ e2e/                     # E2E —Å—Ü–µ–Ω–∞—Ä–∏–∏
‚îÇ   ‚îú‚îÄ‚îÄ scenarios/           # Gherkin —Å—Ü–µ–Ω–∞—Ä–∏–∏
‚îÇ   ‚îÇ   ‚îú‚îÄ‚îÄ migration_scenarios.feature
‚îÇ   ‚îÇ   ‚îú‚îÄ‚îÄ wizard_scenarios.feature
‚îÇ   ‚îÇ   ‚îî‚îÄ‚îÄ power_user_scenarios.feature
‚îÇ   ‚îî‚îÄ‚îÄ expected_ux_flows.md # –û–∂–∏–¥–∞–µ–º—ã–µ UX-—Ñ–ª–æ—É
‚îú‚îÄ‚îÄ integration/             # –ò–Ω—Ç–µ–≥—Ä–∞—Ü–∏–æ–Ω–Ω—ã–µ —Ç–µ—Å—Ç—ã (–±—É–¥—É—â–∏–µ)
‚îú‚îÄ‚îÄ fixtures/                # –¢–µ—Å—Ç–æ–≤—ã–µ –¥–∞–Ω–Ω—ã–µ (–±—É–¥—É—â–∏–µ)
‚îÇ   ‚îú‚îÄ‚îÄ configs/             # –ö–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏–∏ –¥–ª—è —Ç–µ—Å—Ç–æ–≤
‚îÇ   ‚îú‚îÄ‚îÄ subscriptions/       # –ü–æ–¥–ø–∏—Å–∫–∏ –¥–ª—è —Ç–µ—Å—Ç–æ–≤
‚îÇ   ‚îî‚îÄ‚îÄ expected_outputs/    # –û–∂–∏–¥–∞–µ–º—ã–µ —Ä–µ–∑—É–ª—å—Ç–∞—Ç—ã
‚îî‚îÄ‚îÄ helpers/                 # –í—Å–ø–æ–º–æ–≥–∞—Ç–µ–ª—å–Ω—ã–µ —Ñ—É–Ω–∫—Ü–∏–∏ (–±—É–¥—É—â–∏–µ)
```

## –ü—Ä–∏–Ω—Ü–∏–ø—ã —Ç–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏—è

### 1. UX-First –ø–æ–¥—Ö–æ–¥
- –¢–µ—Å—Ç–∏—Ä—É–µ–º –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—å—Å–∫–∏–π –æ–ø—ã—Ç, –∞ –Ω–µ —Ç–æ–ª—å–∫–æ —Ñ—É–Ω–∫—Ü–∏–æ–Ω–∞–ª—å–Ω–æ—Å—Ç—å
- –ü—Ä–æ–≤–µ—Ä—è–µ–º –ø–æ–Ω—è—Ç–Ω–æ—Å—Ç—å —Å–æ–æ–±—â–µ–Ω–∏–π –∏ –ø–æ–¥—Å–∫–∞–∑–æ–∫
- –¢–µ—Å—Ç–∏—Ä—É–µ–º –∏–Ω—Ç—É–∏—Ç–∏–≤–Ω–æ—Å—Ç—å –Ω–∞–≤–∏–≥–∞—Ü–∏–∏

### 2. –û–±—Ä–∞—Ç–Ω–∞—è —Å–æ–≤–º–µ—Å—Ç–∏–º–æ—Å—Ç—å
- –¢–µ—Å—Ç–∏—Ä—É–µ–º —Ä–∞–±–æ—Ç—É –∞–ª–∏–∞—Å–æ–≤
- –ü—Ä–æ–≤–µ—Ä—è–µ–º –º–∏–≥—Ä–∞—Ü–∏—é —Å–æ —Å—Ç–∞—Ä–æ–π —Å—Ç—Ä—É–∫—Ç—É—Ä—ã
- –í–∞–ª–∏–¥–∏—Ä—É–µ–º deprecated –ø—Ä–µ–¥—É–ø—Ä–µ–∂–¥–µ–Ω–∏—è

### 3. –ò–Ω—Ç–µ—Ä–∞–∫—Ç–∏–≤–Ω–æ—Å—Ç—å
- –¢–µ—Å—Ç–∏—Ä—É–µ–º prompts –≤ TTY –∏ non-TTY —Ä–µ–∂–∏–º–∞—Ö
- –ü—Ä–æ–≤–µ—Ä—è–µ–º –æ—Ç–º–µ–Ω—É –æ–ø–µ—Ä–∞—Ü–∏–π
- –¢–µ—Å—Ç–∏—Ä—É–µ–º –≤–∞–ª–∏–¥–∞—Ü–∏—é –≤–≤–æ–¥–∞

### 4. –ê–≤—Ç–æ–º–∞—Ç–∏–∑–∞—Ü–∏—è
- JSON-–≤—ã–≤–æ–¥ –¥–ª—è —Å–∫—Ä–∏–ø—Ç–æ–≤
- Exit codes –¥–ª—è –∞–≤—Ç–æ–º–∞—Ç–∏–∑–∞—Ü–∏–∏
- Non-interactive —Ä–µ–∂–∏–º

## –ö—Ä–∏—Ç–µ—Ä–∏–∏ –∫–∞—á–µ—Å—Ç–≤–∞ UX

### –î–ª—è –Ω–æ–≤–∏—á–∫–æ–≤
- [ ] –ö–æ–º–∞–Ω–¥—ã –∏–Ω—Ç—É–∏—Ç–∏–≤–Ω–æ –ø–æ–Ω—è—Ç–Ω—ã
- [ ] Help-—Ç–µ–∫—Å—Ç—ã –∏–Ω—Ñ–æ—Ä–º–∞—Ç–∏–≤–Ω—ã
- [ ] –û—à–∏–±–∫–∏ –æ–±—ä—è—Å–Ω—è—é—Ç –ø—Ä–æ–±–ª–µ–º—É –∏ —Ä–µ—à–µ–Ω–∏–µ
- [ ] Wizard –≤–µ–¥–µ—Ç –ø–æ—à–∞–≥–æ–≤–æ

### –î–ª—è –æ–ø—ã—Ç–Ω—ã—Ö –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª–µ–π
- [ ] –ì–ª–æ–±–∞–ª—å–Ω—ã–µ —Ñ–ª–∞–≥–∏ —Ä–∞–±–æ—Ç–∞—é—Ç –≤–µ–∑–¥–µ
- [ ] JSON-–≤—ã–≤–æ–¥ —Å—Ç–∞–±–∏–ª–µ–Ω
- [ ] –ö–æ–º–∞–Ω–¥—ã-–∞–ª–∏–∞—Å—ã —ç–∫–æ–Ω–æ–º—è—Ç –≤—Ä–µ–º—è
- [ ] –ö–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏—è –ø–æ —É–º–æ–ª—á–∞–Ω–∏—é —Ä–∞–±–æ—Ç–∞–µ—Ç

### –î–ª—è —Ä–∞–∑—Ä–∞–±–æ—Ç—á–∏–∫–æ–≤
- [ ] Exit codes –ø—Ä–µ–¥—Å–∫–∞–∑—É–µ–º—ã
- [ ] –°–µ—Ä–≤–∏—Å–Ω—ã–π —Å–ª–æ–π –∏–∑–æ–ª–∏—Ä–æ–≤–∞–Ω
- [ ] –¢–µ—Å—Ç—ã –ø–æ–∫—Ä—ã–≤–∞—é—Ç –≤—Å–µ —Å—Ü–µ–Ω–∞—Ä–∏–∏
- [ ] –î–æ–∫—É–º–µ–Ω—Ç–∞—Ü–∏—è –∞–∫—Ç—É–∞–ª—å–Ω–∞

## Continuous Integration

### Pre-commit hooks
- –ü—Ä–æ–≤–µ—Ä–∫–∞ —Å–∏–Ω—Ç–∞–∫—Å–∏—Å–∞ Gherkin
- –í–∞–ª–∏–¥–∞—Ü–∏—è —Ç–µ—Å—Ç–æ–≤—ã—Ö –¥–∞–Ω–Ω—ã—Ö
- –ü—Ä–æ–≤–µ—Ä–∫–∞ –ø–æ–∫—Ä—ã—Ç–∏—è —Ç–µ—Å—Ç–∞–º–∏

### CI Pipeline
- –ó–∞–ø—É—Å–∫ –≤—Å–µ—Ö UX —Ç–µ—Å—Ç–æ–≤
- –ü—Ä–æ–≤–µ—Ä–∫–∞ –æ–±—Ä–∞—Ç–Ω–æ–π —Å–æ–≤–º–µ—Å—Ç–∏–º–æ—Å—Ç–∏
- –í–∞–ª–∏–¥–∞—Ü–∏—è –¥–æ–∫—É–º–µ–Ω—Ç–∞—Ü–∏–∏
- Performance —Ç–µ—Å—Ç—ã

## –û—Ç—á–µ—Ç—ã

### Coverage –æ—Ç—á–µ—Ç—ã
- –ü–æ–∫—Ä—ã—Ç–∏–µ UX —Å—Ü–µ–Ω–∞—Ä–∏–µ–≤
- –ü–æ–∫—Ä—ã—Ç–∏–µ –∫–æ–º–∞–Ω–¥
- –ü–æ–∫—Ä—ã—Ç–∏–µ —Å–µ—Ä–≤–∏—Å–æ–≤

### UX –º–µ—Ç—Ä–∏–∫–∏
- –í—Ä–µ–º—è –≤—ã–ø–æ–ª–Ω–µ–Ω–∏—è –∫–æ–º–∞–Ω–¥
- –ö–æ–ª–∏—á–µ—Å—Ç–≤–æ –æ—à–∏–±–æ–∫ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è
- –£—Å–ø–µ—à–Ω–æ—Å—Ç—å –º–∏–≥—Ä–∞—Ü–∏–∏
- –£–¥–æ–≤–ª–µ—Ç–≤–æ—Ä–µ–Ω–Ω–æ—Å—Ç—å –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª–µ–π

## Contributing

### –î–æ–±–∞–≤–ª–µ–Ω–∏–µ –Ω–æ–≤—ã—Ö —Ç–µ—Å—Ç–æ–≤
1. –°–æ–∑–¥–∞—Ç—å Gherkin —Å—Ü–µ–Ω–∞—Ä–∏–π –≤ `scenarios/`
2. –†–µ–∞–ª–∏–∑–æ–≤–∞—Ç—å —Ç–µ—Å—Ç –≤ —Å–æ–æ—Ç–≤–µ—Ç—Å—Ç–≤—É—é—â–µ–π –∫–∞—Ç–µ–≥–æ—Ä–∏–∏
3. –î–æ–±–∞–≤–∏—Ç—å —Ç–µ—Å—Ç–æ–≤—ã–µ –¥–∞–Ω–Ω—ã–µ –≤ `fixtures/`
4. –û–±–Ω–æ–≤–∏—Ç—å –¥–æ–∫—É–º–µ–Ω—Ç–∞—Ü–∏—é

### –û–±–Ω–æ–≤–ª–µ–Ω–∏–µ —Ç–µ—Å—Ç–æ–≤
1. –û–±–Ω–æ–≤–∏—Ç—å expected outputs –ø—Ä–∏ –∏–∑–º–µ–Ω–µ–Ω–∏–∏ UX
2. –î–æ–±–∞–≤–∏—Ç—å —Ç–µ—Å—Ç—ã –¥–ª—è –Ω–æ–≤—ã—Ö —Ñ—É–Ω–∫—Ü–∏–π
3. –ü—Ä–æ–≤–µ—Ä–∏—Ç—å –æ–±—Ä–∞—Ç–Ω—É—é —Å–æ–≤–º–µ—Å—Ç–∏–º–æ—Å—Ç—å
4. –û–±–Ω–æ–≤–∏—Ç—å –º–µ—Ç—Ä–∏–∫–∏

## Troubleshooting

### –ß–∞—Å—Ç—ã–µ –ø—Ä–æ–±–ª–µ–º—ã
- **TTY detection** - –ø—Ä–æ–≤–µ—Ä—å—Ç–µ `isatty()` –≤ —Ç–µ—Å—Ç–∞—Ö
- **JSON parsing** - –≤–∞–ª–∏–¥–∏—Ä—É–π—Ç–µ —Å—Ç—Ä—É–∫—Ç—É—Ä—É JSON
- **Exit codes** - –ø—Ä–æ–≤–µ—Ä—å—Ç–µ —Å–æ–æ—Ç–≤–µ—Ç—Å—Ç–≤–∏–µ —Å—Ç–∞–Ω–¥–∞—Ä—Ç–∞–º
- **Mock data** - –æ–±–Ω–æ–≤–∏—Ç–µ –ø—Ä–∏ –∏–∑–º–µ–Ω–µ–Ω–∏–∏ —Å—Ö–µ–º

### –û—Ç–ª–∞–¥–∫–∞
```bash
# –ü–æ–¥—Ä–æ–±–Ω—ã–π –≤—ã–≤–æ–¥ —Ç–µ—Å—Ç–æ–≤
pytest tests/cli-ux/ -v -s --tb=long

# –ó–∞–ø—É—Å–∫ –æ–¥–Ω–æ–≥–æ —Ç–µ—Å—Ç–∞
pytest tests/cli-ux/e2e/test_wizard.py::test_wizard_setup -v -s

# –ü—Ä–æ–≤–µ—Ä–∫–∞ —Ñ–∏–∫—Å—Ç—É—Ä
pytest tests/cli-ux/ --setup-show
```
